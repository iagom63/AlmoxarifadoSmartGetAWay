<!DOCTYPE html>


<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Geração de Relatórios</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="report-container">
        <h1>Geração de Relatórios</h1>
        <!-- Exibe a data atual -->
        <p><strong>Data atual:</strong> <span id="currentDate"></span></p>


    <!-- Formulário para Filtro -->
    <div class="filter-section">
        <label for="startDate">Data Inicial:</label>
        <input type="date" id="startDate">

        <label for="endDate">Data Final:</label>
        <input type="date" id="endDate">

        <label for="reportType">Tipo de Relatório:</label>
        <select id="reportType">
            <option value="saida">Saídas</option>
            <option value="entrada">Entradas</option>
            <option value="estoque">Estoque</option>
        </select>

        <button onclick="generateReport()">Gerar Relatório</button>
    </div>

    <!-- Botão para Relatório do Dia -->
    <div class="actions">
        <button onclick="generateTodayReport()">Relatório do Dia</button>
        <button onclick="exportReport()">Exportar PDF</button>
        <button onclick="viewReports()">Visualizar Relatórios</button>
    </div>

    <!-- Tabela de Relatórios -->
    <table id="reportTable">
        <thead>
            <tr>
                <th>Data</th>
                <th>Tipo</th>
                <th>Total de Registros</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <!-- Relatórios serão listados aqui -->
        </tbody>
    </table>
</div>

<script>
    // Preenche a data atual e define valores padrão para os inputs de data
    window.addEventListener('DOMContentLoaded', () => {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString();
        document.getElementById('startDate').value = today;
        document.getElementById('endDate').value = today;
    });
    
    // Redireciona para download do Excel filtrado
    function generateReport() {
        const start = document.getElementById('startDate').value;
        const end   = document.getElementById('endDate').value;
        window.location.href = `/exportar-relatorio-excel?inicio=${start}&fim=${end}`;
    }
    
    function generateTodayReport() {
        window.location.href = '/exportar-relatorio';
    }
    
    function exportReport() {
        // Você já tem a ação em generateReport; pode chamar generateReport aqui
        generateReport();
    }
    
    function viewReports() {
        // Implementar visualização de relatórios gerados
        alert('Visualizando relatórios');
    }
</script>

</body>
</html>
